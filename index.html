<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Controle de Envios VELOZZ</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="VELOZZ">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <!-- Nova biblioteca para leitura de QR Code -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Controle de Envios VELOZZ</h1>

        <!-- Seção 1: Resumo do Dia -->
        <div class="section">
            <h2>Resumo do Dia</h2>
            <div class="stats-container">
                <div class="stat-box">
                    <h3>Pacotes Coletados</h3>
                    <p id="totalPackages">0</p>
                </div>
                <div class="stat-box">
                    <h3>Envios Realizados</h3>
                    <p id="totalShipments">0</p>
                </div>
            </div>
        </div>

        <!-- Seção 2: Novo Envio -->
        <div class="section">
            <h2>Novo Envio</h2>
            <div class="scan-button-container">
                <button id="startScanButton">Iniciar Scanner</button>
                <button id="stopScanButton" style="display: none;">Finalizar Scanner</button>
            </div>
            <div class="form-group">
                <input type="text" id="trackingCode" placeholder="Digite ou escaneie o código" autofocus>
                <button id="addToListBtn">Adicionar à Lista</button>
            </div>
            <p>Total: <span id="counter">0 pacote(s)</span></p>
            <ul id="codeList" class="code-list"></ul>
            
            <div class="form-group">
                <input type="text" id="driverName" placeholder="Nome do motorista responsável" list="driverNamesList">
                <datalist id="driverNamesList"></datalist>
            </div>
            
            <div class="form-group">
                <textarea id="observations" placeholder="Informações adicionais (opcional)" rows="3"></textarea>
            </div>
            
            <button id="confirmBtn">Confirmar Envios</button>
        </div>

        <!-- Seção 3: Consultar Envios -->
        <div class="section">
            <h2>Consultar Envios</h2>
            <div class="form-group">
                <input type="date" id="searchDate">
                <button id="searchBtn">Buscar Envios</button>
            </div>
            
            <div id="resultsContainer" hidden>
                <div class="stats-container">
                    <div class="stat-box">
                        <h3>Pacotes na Data</h3>
                        <p id="pacotesDia">0</p>
                    </div>
                    <div class="stat-box">
                        <h3>Envios na Data</h3>
                        <p id="coletasDia">0</p>
                    </div>
                </div>
                
                <table id="resultsTable">
                    <thead>
                        <tr>
                            <th>Hora</th>
                            <th>Códigos</th>
                            <th>Motorista</th>
                            <th>Observações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Scanner Elements -->
    <div class="scanner-overlay"></div>
    <div id="interactive" class="viewport"></div>

    <!-- Modal de Confirmação -->
    <div id="confirmation-modal" class="modal">
        <div class="modal-content">
            <h2>Confirmar Envio</h2>
            <div id="modal-details"></div>
            <div class="modal-buttons">
                <button onclick="closeModal()">Cancelar</button>
                <button onclick="saveShipment()">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
